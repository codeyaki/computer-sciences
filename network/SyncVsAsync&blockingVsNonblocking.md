# Sync VS Async & Blocking VS Non-Blocking
얼마전까지만 해도 동기, 비동기와 블로킹, 논블로킹의 차이에 대해 인지하고 있지 않았는데 다 다른것을 의미한다는 것을 알게되었고 좀 더 명확하게 알고자 정리를 하게 되었다.  
간단하게 정리를 하자면 두가지의 큰 차이점은 동기/비동기는 프로세스의 수행 순서에 대한 이야기인 반면 블로킹/논블로킹은 입출력(프로세스 유후 상태)에 대한 이야기이다.

## 동기와 비동기
동기와 비동기는 함수의 제어권과는 관련없이 함수의 동작순서에 초점을 맞춘것이다. 
### 동기 (Synchronized)
먼저 동기를 살펴보자. 동기의 단어의 뜻을 살펴보면

> 同期  
> 같은 시기, 또는 같은 기간

라는 뜻을 가지고 있다.  즉, 데이터의 요청과 응답이 동시에 일어난다는 뜻이다.  
호출하는 A가 호출되는 B가 끝날때까지 신경을 쓰고있다면 이것은 동기함수이다.  
### 비동기 (Asynchronous)
반면 비동기를 살펴보면 동기의 반대말로 같은시기에 일어나지 않는 것을 뜻한다.  
이는 데이터의 요청과 응답이 동시에 일어나지 않는다는 뜻이며 호출하는 A가 호출되는 B가 끝나는 것을 신경을 쓰고있지 않다는 것이다. 추가적으로 콜백함수를 사용해서 B가 끝날때 동작할 함수를 미리 지정을 해두는 것이다.  

## 블로킹과 논블로킹
블로킹과 논블로킹은 함수가 동작하는 동안의 제어권에 초점을 맞춘 것이다. 즉 제어권이 누구한테 있냐에 따라 블로킹과 논블로킹으로 나눠지게 되는 것이다. 
### 블로킹 (Blocking)
먼저 블로킹을 살펴보자, 블로킹은 자신의 작업을 진행하다가 다른 함수를 호출하게되면 해당 함수가 끝날때까지 자신의 작업을 멈추는 것이다. 즉, 제어권은 다른 주체에게 넘기게 된다.  
### 논블로킹 (Non-blokcing)
반면 논블로킹의 경우에는 다른 함수를 호출하게 되면 제어권을 넘기지 않고 계속 이어서 코드를 실행하게 된다.  

---

## 조합
이제 각자의 경우에 대해서 알게 되었으니 두가지를 섞어보자.
![blocking](https://github.com/5onchangwoo/study/blob/main/asset/img/%08SyncVsAsync%26BlockingVsNonBlocking1.png)
해당 말을 보다보면 이러한 사진을 많이 보게 되었을 것이다. 나 또한 해당 사진이 동기,비동기 x 블로킹, 논블로킹을 가장 한눈에 알 수 있도록 잘 그린 표라고 생각한다.
### Sync + Blocking
가장 먼저 동기 + 블록킹의 경우를 알아보자.  
어느 한 사원이 과장에게 결재를 받으러 갔다. 과장은 서류를 받고선 금방 처리할테니 기다리세요라는 말을 한뒤 서류를 처리해 주었다. 사원은 과장이 서류를 처리하는 동안 자신의 일을 하지 못한 채 과장이 서류를 처리해줄때까지 기다려야만 했다. 이러한 경우에 동기 + 블로킹의 경우라고 할 수 있다.

### Sync + Non-blocking
그 다음으로 동기 + 논블로킹의 경우를 알아보자.  
사실 이 케이스는 처음에는 잘 와닿지 않았다.  이 케이스가 실질적으로 필요한 경우가 있는지 궁금해서 찾아본 결과 대표적으로 사용되는 케이스가 게임 로딩화면과 같은 곳에서 사용한다고 한다. 맵이 로드되어야지 다음 스텝으로 넘어갈 수 있는데 화면을 멈춘상태에서 마냥 사용자를 기다리게하면 사용자는 고장이 난게 아닌지 오해를 하기도 하고 기분이 안좋아 질 것이다.
따라서 조작할 수 있는 상태에서 로딩창을 띄어 사용자가 기다릴 수 있도록 만들어 주어야한다.

### Async + Blocking
이 경우는 사실상 사용되지 않는 경우이다. 왜냐하면 Async를 해서 바로 리턴을 받았지만 Blocking으로 구현하여 호출한 함수가 완료될때까지 아무것도 하지 못하는 경우이기 때문이다. 이 경우가 나타나는 코드는 주로 개발자가 로직을 잘못 구현하여 발생하는 경우가 대부분이다.
사실상 Sync+Blocking과 같은 처리 효율을 보여주게 된다. 대표적인 예로는 Nodejs와 MySQL을 사용하는 경우이러한 형태가 나타나게 된다. 즉, 동작하는 과정 중에 한개라도 Blocking이 있는 경우 이 경우가 될 수 있다.  
이 경우는 장점이 한개도 없는 경우이기 때문에 최대한 피해야 한다.

### Async + Non-Blocking
마지막으로 비동기 + 논블로킹이다. 일의 효율이 증가하게 되는 방식이다.  
대표적인 예로 커피숍에서 진동벨을 사용하는 경우이다. 손님이 주문하게 되면 점원은 음료가 완료되면 진동벨을 울리겠다고 하며 진동벨(return)을 주게 된다. 손님은 진동벨을 들고 자신의 자리에 가서 본인의 할일을 하다가 진동벨이 울리면(콜백함수) 음료를 받아온다.  
가장 효율적인 일처리를 보여주지만 구현방법이 상대적으로 어려운 단점이 생긴다.


[첫화면으로 돌아가기](https://github.com/5onchangwoo/computer-sciences)
